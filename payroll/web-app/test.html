<html>
<head>
    <script type="text/javascript" src="js/libs/backbone.marionette/jquery.js"></script>
</head>
<body>
<div id="oiiContainer"></div>
<script type="text/javascript" src="js/oiiWidgets.js"></script>
<script type="text/javascript">
        oiiWidgets.launch({
            offeringId : "Intuit.ems.iop",					/* probably ok to hard-code for your app */
            oiiEnv : "e2e",									/* should vary based on current environment */
            oiiUrl : "https://accounts-e2e.intuit.com",		/* should vary based on current environment */
            containerId : "oiiContainer",					/* must match <div> element above */
            isEmailConfirmed : true,
            unencryptedEmail : "test@test.com",
            encryptedEmail : "asd2654foi1wer98e3!==",
            companyName : "Acme Inc.",
            startWidget : oiiWidgets.WIDGET_SIGN_IN,		/* If, for example, you wanted to force starting with the sign-in -widget */
            isMigrate : true,								/* set to true if doing sign-up workflow */
            useCurrentLogin : false,
            showVerifyLogin : false,
            showSecurityUpgrade : true,
            onTermsOfServiceClick : handleTermsOfServiceClick,
            onCustomerServiceClick : handleCustomerServiceClick,
            onNotify : handleWidgetNotify,
            onUpdate : handleWidgetUpdate,
            onFinish : handleWidgetFinish,
            onFinishNeedCreate : handleWidgetNeedCreate,
            onError : handleWidgetError,
            signInHeaderAccountAutoSelected : "We noticed that <b>{1}</b> already has an Intuit account.",
            signInHeaderAccountUserSelected : "Now that you've selected your user ID, please use it to sign in to your Intuit account.",
            signInHeaderAccountNotShown : "We noticed that <b>{0}</b> already has an Intuit account. Enter the user ID associated with that email address."
        });
function handleWidgetNotify(widgetId, info) {
//    --- log and/or track activity --
//    --- info parameter is an object whose properties vary based on the notification - see "info object" documentation below ---
}
function handleWidgetUpdate(widgetId, info) {
//    --- resize frame or perform any other updates needed when a widget's content gets udpated (good place to log widget activity) ---
//    --- info parameter is an object whose properties vary based on the notification - see "info object" documentation below ---
}
function handleWidgetFinish(realmId, grantInfo, autoCreated) {
//    --- perform whatever actions you need when OII workflow has completed ---
//    --- realmId indicates the selected realm ---
//    ---    NOTE: Workflow can exit via this callback with no realmId. This indicates that user was prompted to enter ---
//    ---          an email address, and no account was found for the entered email address.                           ---
//    --- grantInfo indicates if QBO realm was selected - if so value will be QBO offering ID, if not value will be null ---
//    --- autoCreated is true or false to indicate if realm was created by OII ---
    console.log(realmId);
    $('#oiiContainer').hide();
    var companyModel = {
        "realmId": "1003900273",
        "companyWorkLocation": "Mountain View,CA,94039",
        "businessName": "Acme Inc.",
        "featureSetType": "BasicMinus"
    };
    var obj = {"updateCompanyModel": {
        "businessName": "Acme Inc.",
        "realmId": 1003900273,
        "companyType": "SmallBusiness",
        "serviceType": "IOP",
        "region": "US",
        "regionalSettings": "",
        "isAccountantClient": false,
        "businessAddress": {
            "address1": "address, line1",
            "address2": "address, line#2",
            "city": "Anchorage",
            "county": "",
            "isDefaultAddressOK": false,
            "isTaxAddress": false,
            "state": "AK",
            "taxAddress": {
                "address1": "address, line1",
                "address2": "address, line#2",
                "city": "Anchorage",
                "county": "",
                "isDefaultAddressOK": false,
                "isTaxAddress": false,
                "state": "AK",
                "zip": 99519
            },
            "validateAddress": true,
            "zip": 99519
        },
        "principalOfficer": "Thomas Sawyer",
        "signupDate": "2003-02-05T11:59:43.480-08:00",
        "phone": "408-944-6000",
        "phoneExtension": "",
        "homePhone": "",
        "mobilePhone": "",
        "fax": "",
        "acceptedCustomerServiceAgreement": true,
        "needsToAcceptCustomerServiceAgreement": false,
        "featureSetType": "BasicMinus",
        "featureSetIsLocked": true,
        "offerCodeEncrypted": "45FF7FD71FDCAA3ABAF0FA1985431E9490563DDA8D228992E53A1C678C4ECDEADBB529B151B6F37B",
        "clearTextSourceCode": "https://trex.paycycle.com/test/in/todo/default.jsp",
        "visitorId": 901976,
        "marketingCode": "",
        "referrer": "",
        "directDeposit": false,
        "directDepositPaperCheckWhileWaiting": true,
        "havePaidEmployeesThisYear": true,
        "startPayrollThisQtr": true,
        "havePaidTimeOff": true,
        "haveAssignedPaidTimeOffToEmployees": false,
        "moreThanOneWorkLocation": false,
        "haveContractor": false,
        "contractorsOnly": false,
        "editWorkLocationAllowed": true,
        "isTimeSheetsTrackingOn": true,
        "showWorkLocation": true,
        "showTimeTracking": true,
        "showContractor": true,
        "contractorsOnlyEditIsLocked": true,
        "showDirectDeposit": true,
        "showHistory": true,
        "showFUD": true,
        "stateEditIsLocked": true,
        "emailConfirmationIsNeeded": false,
        "primaryContact": {
            "firstName": "AK_SmallBiz",
            "middleInitial": "",
            "lastName": "AK",
            "eMailAddress": "AK_SmBiz_silk_ir11@testpaycycle.com_junk",
            "eMailAddress2": "AK_SmBiz_silk_ir11@testpaycycle.com_junk",
            "userID": "brett_groshong@intuit.com",
            "secretQuestionsAnswered": false
        },
        "workLocations": [
            {
                "address1": "address, line1",
                "address2": "address, line#2",
                "city": "Anchorage",
                "county": "",
                "isDefaultAddressOK": false,
                "isTaxAddress": false,
                "state": "AK",
                "taxAddress": {
                    "address1": "address, line1",
                    "address2": "address, line#2",
                    "city": "Anchorage",
                    "county": "",
                    "isDefaultAddressOK": false,
                    "isTaxAddress": false,
                    "state": "AK",
                    "zip": 99519
                },
                "zip": 99519,
                "active": true,
                "canDelete": false
            }
        ],
        "companyDeductions": [
            {
                "description": "Med. Insurance",
                "maxAmount": 0,
                "isEditMaxAmount": true,
                "isMaxAmountOptional": true,
                "isPreTax": true,
                "categoryId": 1,
                "deductionCategoryType": "HEALTH_INSURANCE",
                "contributionType": "BothEmployerAndEmployee",
                "deductionItemDecription": "Medical Insurance",
                "deductionItemId": 1,
                "isGarnishment": false,
                "isAssigned": false,
                "isEditSetup": true,
                "isIntuit401K": false,
                "canUserDelete": true,
                "allCanChangePreTax": false
            },
            {
                "description": "401K Plan",
                "maxAmount": 17500,
                "isEditMaxAmount": false,
                "isMaxAmountOptional": true,
                "isPreTax": true,
                "categoryId": 3,
                "deductionCategoryType": "RETIREMENT_PLANS",
                "contributionType": "BothEmployerAndEmployee",
                "deductionItemDecription": "401(k)",
                "deductionItemId": 10,
                "isGarnishment": false,
                "isAssigned": false,
                "isEditSetup": true,
                "isIntuit401K": false,
                "canUserDelete": true,
                "allCanChangePreTax": false
            },
            {
                "description": "Dependant FSA",
                "maxAmount": 5000,
                "isEditMaxAmount": false,
                "isMaxAmountOptional": true,
                "isPreTax": true,
                "categoryId": 4,
                "deductionCategoryType": "FLEXIBLE_SPENDING_PLANS",
                "contributionType": "EmployeeOnly",
                "deductionItemDecription": "Dependent Care FSA",
                "deductionItemId": 12,
                "isGarnishment": false,
                "isAssigned": false,
                "isEditSetup": true,
                "isIntuit401K": false,
                "canUserDelete": true,
                "allCanChangePreTax": false
            },
            {
                "description": "401K Catchup Plan",
                "maxAmount": 23000,
                "isEditMaxAmount": false,
                "isMaxAmountOptional": true,
                "isPreTax": true,
                "categoryId": 3,
                "deductionCategoryType": "RETIREMENT_PLANS",
                "contributionType": "BothEmployerAndEmployee",
                "deductionItemDecription": "401(k) Catch-up",
                "deductionItemId": 23,
                "isGarnishment": false,
                "isAssigned": false,
                "isEditSetup": true,
                "isIntuit401K": false,
                "canUserDelete": true,
                "allCanChangePreTax": false
            }
        ],
        "ptoPolicies": [
            {
                "category": "Sick",
                "description": "Sick Policy 1",
                "accrualFrequency": "perYear",
                "ptoAccrualType": "ACCRUE",
                "accrualRate": 24,
                "accrualMaximum": 0
            },
            {
                "category": "Vacation",
                "description": "Vacation Policy 1",
                "accrualFrequency": "perYear",
                "ptoAccrualType": "ACCRUE",
                "accrualRate": 80,
                "accrualMaximum": 0
            },
            {
                "category": "Sick",
                "description": "Sick Policy 2",
                "accrualFrequency": "perPayPeriod",
                "ptoAccrualType": "ACCRUE",
                "accrualRate": 24,
                "accrualMaximum": 0
            },
            {
                "category": "Vacation",
                "description": "Vacation Policy 2",
                "accrualFrequency": "perPayPeriod",
                "ptoAccrualType": "ACCRUE",
                "accrualRate": 80,
                "accrualMaximum": 0
            }
        ],
        "companyWageItems": [
            {
                "isActive": true,
                "name": "Allowance",
                "permanentName": "Allowance",
                "isNonCash": false,
                "displayOrder": 12,
                "wageItemId": "ALLOWANCE",
                "isPaidByHours": false,
                "payDayName": "Allow.",
                "wageItemExportType": "ExpenseOnly"
            },
            {
                "isActive": true,
                "name": "Bonus",
                "permanentName": "Bonus",
                "isNonCash": false,
                "displayOrder": 10,
                "wageItemId": "BONUS",
                "isPaidByHours": false,
                "payDayName": "Bonus",
                "wageItemExportType": "ExpenseOnly"
            },
            {
                "isActive": true,
                "name": "Holiday Pay",
                "permanentName": "HolidayPay",
                "isNonCash": false,
                "displayOrder": 9,
                "wageItemId": "HOLIDAY_PAY",
                "isPaidByHours": true,
                "payDayName": "Holiday Pay",
                "wageItemExportType": "ExpenseOnly"
            },
            {
                "isActive": true,
                "name": "Cash Tips",
                "permanentName": "CashTips",
                "isNonCash": true,
                "displayOrder": 14,
                "wageItemId": "CASH_TIPS",
                "isPaidByHours": false,
                "payDayName": "Cash Tips",
                "wageItemExportType": "DoNotExport"
            },
            {
                "isActive": true,
                "name": "Commission",
                "permanentName": "Commission",
                "isNonCash": false,
                "displayOrder": 11,
                "wageItemId": "COMMISSION",
                "isPaidByHours": false,
                "payDayName": "Comm.",
                "wageItemExportType": "ExpenseOnly"
            },
            {
                "isActive": true,
                "name": "Double Overtime Pay",
                "permanentName": "DblOvrPay",
                "isNonCash": false,
                "displayOrder": 4,
                "wageItemId": "DOUBLE_OVERTIME",
                "isPaidByHours": true,
                "payDayName": "Double OT",
                "wageItemExportType": "ExpenseOnly"
            },
            {
                "isActive": true,
                "name": "Regular Pay",
                "permanentName": "HOURLY1",
                "isNonCash": false,
                "displayOrder": 1,
                "wageItemId": "HOURLY_PAY",
                "isPaidByHours": true,
                "payDayName": "Regular Pay",
                "wageItemExportType": "ExpenseOnly"
            },
            {
                "isActive": true,
                "name": "Reimbursement",
                "permanentName": "Reimburse",
                "isNonCash": false,
                "displayOrder": 13,
                "wageItemId": "REIMBURSEMENT",
                "isPaidByHours": false,
                "payDayName": "Reimb.",
                "wageItemExportType": "ExpenseOnly"
            },
            {
                "isActive": true,
                "name": "Vacation Pay",
                "permanentName": "VacPay",
                "isNonCash": false,
                "displayOrder": 8,
                "wageItemId": "VACATION_PAY",
                "isPaidByHours": true,
                "payDayName": "Vacation Pay",
                "wageItemExportType": "ExpenseOnly"
            },
            {
                "isActive": true,
                "name": "Salary",
                "permanentName": "Salary",
                "isNonCash": false,
                "displayOrder": 0,
                "wageItemId": "SALARY",
                "isPaidByHours": true,
                "payDayName": "Regular",
                "wageItemExportType": "ExpenseOnly"
            },
            {

                "isActive": true,
                "name": "Overtime Pay",
                "permanentName": "OvrPay",
                "isNonCash": false,
                "displayOrder": 3,
                "wageItemId": "OVERTIME",
                "isPaidByHours": true,
                "payDayName": "OT",
                "wageItemExportType": "ExpenseOnly"
            },
            {

                "isActive": true,
                "name": "Hourly 2",
                "permanentName": "HOURLY2",
                "isNonCash": false,
                "displayOrder": 1,
                "wageItemId": "HOURLY_PAY",
                "isPaidByHours": true,
                "payDayName": "Hourly 2",
                "wageItemExportType": "ExpenseOnly"
            },
            {

                "isActive": true,
                "name": "Sick Pay",
                "permanentName": "SickPay",
                "isNonCash": false,
                "displayOrder": 7,
                "wageItemId": "SICK_PAY",
                "isPaidByHours": true,
                "payDayName": "Sick Pay",
                "wageItemExportType": "ExpenseOnly"
            }
        ],
        "convertFromCode": "UNDEFINED",
        "miscAttributes": "",
        "billingInformat" : {
            "billingId": 811,
            "nextBillingId": 811,
            "nextBillingDate": "2013-03-13T00:00:00-07:00",
            "billingExpirationDate": "2017-06-12T00:00:00-07:00",
            "name": "Basic NoForms (IOP) $1.50 at 1stEE",
            "longDesc": "You will be charged $1.50 a month for each employee you pay for each month of your annual subscription. Pay up to 150 employees. Service includes 1 state. If you file taxes in more than one state, each additional state is $12 per month. If you add or remove services, your service fees will be adjusted accordingly. Sales tax may be applied where applicable.\u003cbr\u003e\u003cbr\u003eYou will be charged each month on the same day of the month that you approve your first paycheck. If you approve your first check on the 29th, 30th, or 31st of a month, you will be billed on the 28th of each month thereafter. You may cancel at any time online within your payroll account (click the Setup tab and then click Cancel Service) or by calling (866) 729-2925.",
            "isFree": false,
            "isObsolete": false,
            "discountRate": "0.0000",
            "footNote1": "*Fees are subject to change.  You will be notified of any fee changes at least 30 days before their effective date.  Special fees apply to \u003ca href\u003d\"../../help/popupHelp.jsp?context\u003dfaq\u0026id\u003d499\" onClick\u003d\"popupWindow(\u0027../../help/popupHelp.jsp?context\u003dfaq\u0026id\u003d499\u0027, \u0027Help\u0027); return false\"\u003eexception processing. \u003c/a\u003e",
            "footNote2": "null",
            "billingTerms": "\u003cbr\u003e\u003cbr\u003eYou will be charged $1.50 a month for each employee you pay for each month of your annual subscription. Pay up to 150 employees. Service includes 1 state. If you file taxes in more than one state, each additional state is $12 per month. If you add or remove services, your service fees will be adjusted accordingly. Sales tax may be applied where applicable.\u003cbr\u003e\u003cbr\u003eYou will be charged each month on the same day of the month that you approve your first paycheck. If you approve your first check on the 29th, 30th, or 31st of a month, you will be billed on the 28th of each month thereafter. You may cancel at any time online within your payroll account (click the Setup tab and then click Cancel Service) or by calling (866) 729-2925.\u003cbr\u003e\u003cbr\u003eYou will be charged $1.50 a month for each employee you pay for the next 11 months. Pay up to 150 employees. Service includes 1 state. If you file taxes in more than one state, each additional state is $12 per month. If you add or remove services, your service fees will be adjusted accordingly. Sales tax may be applied where applicable.\u003cbr\u003e\u003cbr\u003eYou will be charged each month on the same day of the month that you approve your first paycheck. If you approve your first check on the 29th, 30th, or 31st of a month, you will be billed on the 28th of each month thereafter. You may cancel at any time online within your payroll account (click the Setup tab and then click Cancel Service) or by calling (866) 729-2925.",
            "isBilledYearly": false,
            "address": {
                "address1": "address, line1",
                "address2": "address, line#2",
                "city": "Anchorage",
                "county": "",
                "isDefaultAddressOK": false,
                "isTaxAddress": false,
                "state": "AK",
                "taxAddress": {

                    "address1": "address, line1",
                    "address2": "address, line#2",
                    "city": "Anchorage",
                    "county": "",
                    "isDefaultAddressOK": false,
                    "isTaxAddress": false,
                    "state": "AK",
                    "zip": 99519
                },
                "validateAddress": true,
                "zip": 99519
            },
            "skipValidation": false,
            "nextBillingDateForNonZeroAmount": "2013-03-13T00:00:00-07:00",
            "partnerId": 0,
            "durationId": 0,
            "cutOffDayOfMonth": 0,
            "resetStartDateOnUpgrade": false
        },
        "isActive": true,
        "billingActivationDate": "2012-03-13T00:00:00-07:00",
        "companyTaxSetup": {
            "filingName": "AK small biz",
            "filingType": "other",
            "isFilingAddressSameAsBusinessAddress": true,
            "federalEIN": "12-3456789",
            "federalDepositSchedules": [
                {
                    "scheduleId": 1,
                    "filingType": "form941",
                    "effectiveDate": "2003-01-01T00:00:00-08:00",
                    "endDate": "3000-01-01T00:00:00-08:00"
                }
            ],
            "stateTaxSetup": [
                {
                    "state": "AK",
                    "stateTaxRates": [
                        {

                            "rate": "0.02080000",
                            "taxItemId": 101,
                            "effectiveDate": "2003-01-01T00:00:00-08:00",
                            "state": "AK",
                            "endDate": "3000-02-01T00:00:00-08:00",
                            "taxRateType": -1
                        }
                    ],
                    "ein1": "0123456789"
                }
            ]
        },
        "isBillingAddressBizAddress": true,
        "cCard": {
            "CCardExpireMonth": 1,
            "CCardExpireYear": 2021,
            "CCardHolderName": "AK_SmallBiz AK",
            "CCardNumber": "....1111",
            "CCardType": "V"
        },
        "formUsageDate": "2003-01-01T00:00:00-08:00",
        "initialSetupCompleted": false,
        "isOnHold": false,
        "companyExternalId": 1129678,
        "bankAccountStatusId": 0,
        "isCompanyBankAccountChanged": false,
        "ddStatus": "DD_NOT_ELECTED",
        "ddLimit": 0,
        "partnerName": "PAYCYCLE",
        "serviceNameAsSubject": "Intuit Online Payroll",
        "serviceNameAsObject": "Intuit Online Payroll",
        "serviceNameAsAdjective": "Intuit Online Payroll",
        "serviceNameAsPossessive": "Intuit Online Payroll\u0027s",
        "mobileShowTaxesAndForms": true,
        "mobileTaxesAndFormsSetupComplete": true,
        "mobileTaxesAndFormsSetupStatus": "Complete"
    }
    };
    $.ajax({
        url: 'https://branch-ws.iopdev.intuit.com/test/webservices/json/SetupWebService',
        contentType: 'application/json',
        type: 'POST',
        dataType: 'json',
        data: JSON.stringify(companyModel),
        success: function(data, status, jqXHR) {
            console.log('----- updateCompany SUCCESS ------');
            console.log(data);
        },
        error: function(jqXHR, status, errorThrown) {
            console.log('----- updateCompany FAILURE ------');
            console.log(errorThrown);
        }
    });
}
function handleWidgetNeedCreate(companyName) {
//	--- handle realm creation workflow ---
// 				--- company name will be null if no company was provided to the widgets ---
    alert("needCreate");
}
//
function handleWidgetError(widgetId, errorCode, logMessage) {
//	--- show appropriate user message for widgetId and errorCode, write logMessage to server log ---
//	--- see oiiWidgets.errorCodes.* for the possible errorCode values ---
}
function handleTermsOfServiceClick() {
    window.open("http://business.intuit.com/directory/terms.jsp", "oiiNavigation");
}
function handleCustomerServiceClick() {
    window.open("http://about.intuit.com/contact/", "oiiNavigation");
}
</script>

</body>
</html>